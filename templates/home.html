{% extends "base.html" %}
{% set title = "Accueil" %}

{% block content %}

<!-- HERO = 2 cartes (1ère + 3ème) à la place de la grande photo -->
<div class="hero hero-maps-only mb-4">
  <div class="hero-maps-only-grid">
    {% if cartes_urls and cartes_urls|length >= 1 %}
      <div class="hero-map-big">
        <img src="{{ cartes_urls[0] }}" alt="Carte 1">
      </div>
    {% endif %}
    {% if cartes_urls and cartes_urls|length >= 3 %}
      <div class="hero-map-big">
        <img src="{{ cartes_urls[2] }}" alt="Carte 3">
      </div>
    {% endif %}
  </div>
</div>

<div class="panel p-4 mb-4">
  <div class="fw-bold" style="font-size:20px;">{{ tr('home_intro_title') }}</div>
  <div class="mt-2">
    {{ tr('home_intro_text') }}
  </div>
</div>

<div class="section-title mb-3">{{ tr('home_title') }}</div>

<div class="home-masonry">
  {% for r in regions %}
    <a href="{{ url_for('region', slug=r.slug) }}" class="masonry-item d-block">
      {% if r.carousel and r.carousel|length > 0 %}
        <div id="car-{{ r.slug }}" class="carousel slide" data-bs-ride="carousel" data-bs-interval="1800">
          <div class="carousel-inner">
            {% for url in r.carousel %}
              <div class="carousel-item {% if loop.index0 == 0 %}active{% endif %}">
                <img src="{{ url }}" class="d-block w-100" style="height:200px; object-fit:cover;" alt="{{ r.name }}">
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
      <div class="masonry-label">{{ r.name }} · {{ r.count }} photos</div>
    </a>
  {% endfor %}

  <!-- carte 2 = tuile pour meubler -->
  {% if cartes_urls and cartes_urls|length >= 2 %}
    <div class="masonry-item d-block">
      <img src="{{ cartes_urls[1] }}" alt="Carte 2" style="width:100%; height:200px; object-fit:cover;">
      <div class="masonry-label">Carte</div>
    </div>
  {% endif %}
</div>

<!-- CTA en bas à droite -->
<div class="d-flex justify-content-end mt-4">
  <div class="panel p-3 d-flex gap-2 flex-wrap align-items-center">
    <a class="btn btn-danger fw-bold" href="{{ url_for('contact') }}">{{ tr('cta_contact') }}</a>
    <a class="btn btn-outline-secondary fw-bold" href="{{ url_for('tarifs') }}">{{ tr('cta_tarifs') }}</a>
  </div>
</div>

{% endblock %}